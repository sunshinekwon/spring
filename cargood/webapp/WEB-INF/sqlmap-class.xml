<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cargood.cargoodDAO.cargoodDAOimpl">
	<select id="mainNewcarList" resultType="CargoodVO">
		select * from (select cartitle,carimg1,carimg2,carimg3 from carlist order by carcnt) <![CDATA[ where rownum <=3 ]]>
	</select>
	
	<select id="selAllNewCarList" resultType="CargoodVO">
		select * from carlist order by cardate
	</select>

	<select id="selOneCarList" parameterType="String" resultType="CargoodVO">
		select * from carlist where cartitle=#{title,jdbcType=VARCHAR}
	</select>
	
	<update id="addCnt" parameterType="String">
		update carlist set carcnt = carcnt + 1 where cartitle = #{title,jdbcType=VARCHAR}
	</update>
	
	<insert id="putCarContent" parameterType="CargoodVO">
		insert into carlist (cartitle,carcontent,carimg1,carimg2,carimg3,carwriter,cardate) values(#{CARTITLE,jdbcType=VARCHAR},#{CARCONTENT,jdbcType=VARCHAR},#{CARIMG1,jdbcType=VARCHAR},#{CARIMG2,jdbcType=VARCHAR},#{CARIMG3,jdbcType=VARCHAR},#{CARWRITER,jdbcType=VARCHAR},#{CARDATE,jdbcType=TIMESTAMP})
	</insert>
	
	<delete id="delCarContent" parameterType="int">
		delete from carlist where carseq = #{seq,jdbcType=INT}
	</delete>
	
	<!-- 회원가입 관련 -->
	<select id="checkId" parameterType="String" resultType="int">
		select * from cargoodmember where id = #{id,jdbcType=VARCHAR}
	</select>
	
	<insert id="putMember" parameterType="CargoodVO">
		insert into cargoodmember (name,id,pw) values(#{NAME,jdbcType=VARCHAR},#{ID,jdbcType=VARCHAR},#{PW,jdbcType=VARCHAR})
	</insert>
	
	<!-- 로그인 관련 -->
	<select id="checkIdPw" parameterType="CargoodVO" resultType="int">
		select * from cargoodmember where ( id=#{ID,jdbcType=VARCHAR} ) and ( pw=#{PW,jdbcType=VARCHAR} )
	</select>
	
	<select id="loginSucGetName" parameterType="String" resultType="CargoodVO">
		select * from cargoodmember where id = #{id,jdbcType=VARCHAR}
	</select>
	
	<select id="pagingGetCarList" parameterType="String" resultType="CargoodVO">
		select * from ( select cardate,carimg1,carimg2,carimg3,cartitle,carwriter,carcontent, row_number() over(order by cardate) as rank from carlist ) where rank between #{pageNum} and #{pageNum}+2
	</select>
	
	<select id="pagingGetNum" resultType="int">
		select count(*) from carlist;
	</select>
	
</mapper>